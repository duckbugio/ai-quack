# Утка - Flappy Bird Clone

Веб-игра в стиле Flappy Bird, разработанная на React и TypeScript. Цель игры - управлять уткой, избегая препятствий и набирая очки.

## Описание

"Утка" - это современная веб-игра, вдохновленная классической игрой Flappy Bird. Игрок управляет уткой, которая должна пролетать между препятствиями, набирая очки за каждое успешно пройденное препятствие. Игра включает систему прогрессивной сложности, звуковые эффекты, систему частиц и адаптивный дизайн для различных устройств.

## Технологии

- **React 18+** - UI библиотека для создания компонентов
- **TypeScript 5+** - Типизированный JavaScript для надежности кода
- **Vite** - Современный сборщик для быстрой разработки
- **Canvas API** - Рендеринг игровой графики и анимаций
- **CSS Modules** - Стилизация компонентов
- **Vitest** - Фреймворк для тестирования

## Установка

1. Клонировать репозиторий:
```bash
git clone <repository-url>
cd duck-game
```

2. Установить зависимости:
```bash
npm install
```

## Запуск

### Разработка

Запустить dev-сервер:
```bash
npm run dev
```

Игра будет доступна по адресу `http://localhost:5173` (или другому порту, указанному Vite).

### Production сборка

Создать production сборку:
```bash
npm run build
```

Собранные файлы будут находиться в директории `dist/`.

### Предпросмотр production сборки

Предпросмотр production сборки:
```bash
npm run preview
```

### Тестирование

Запустить тесты:
```bash
npm test
```

Запустить тесты с UI:
```bash
npm run test:ui
```

Запустить тесты один раз:
```bash
npm run test:run
```

### Линтинг и форматирование

Проверить код линтером:
```bash
npm run lint
```

Отформатировать код:
```bash
npm run format
```

## Управление

- **Пробел** или **Стрелка вверх** - прыжок утки
- **Клик мыши** или **Тап** - прыжок утки
- **Escape** - пауза (во время игры)

## Игровые механики

- **Гравитация** - утка постоянно падает вниз
- **Прыжок** - нажатие клавиши или клик поднимает утку вверх
- **Препятствия** - нужно пролетать между верхней и нижней частями препятствий
- **Подсчет очков** - очки начисляются за каждое успешно пройденное препятствие
- **Прогрессивная сложность** - скорость препятствий увеличивается с ростом счета
- **Сохранение рекорда** - лучший результат сохраняется в localStorage

## Архитектура проекта

```
src/
├── components/          # React компоненты
│   ├── Game/          # Основной игровой компонент
│   │   └── GameCanvas.tsx
│   └── UI/            # UI компоненты (меню, кнопки)
│       ├── MainMenu.tsx
│       ├── PauseMenu.tsx
│       ├── GameOverMenu.tsx
│       └── PerformanceOverlay.tsx
├── contexts/          # React контексты для состояния
│   └── GameContext.tsx
├── game/              # Игровая логика
│   ├── entities/      # Игровые сущности (Утка, Препятствия)
│   │   ├── Duck.ts
│   │   └── Obstacle.ts
│   ├── systems/       # Игровые системы
│   │   ├── CollisionSystem.ts
│   │   ├── ObstacleManager.ts
│   │   ├── ScoreSystem.ts
│   │   └── ParticleSystem.ts
│   └── utils/         # Утилиты
│       ├── constants.ts
│       ├── SoundManager.ts
│       ├── PerformanceMonitor.ts
│       └── BrowserCompatibility.ts
├── hooks/             # Кастомные React хуки
│   ├── useGameLoop.ts
│   └── useKeyboard.ts
├── types/             # TypeScript типы и интерфейсы
│   └── game.types.ts
└── assets/            # Ресурсы (звуки, изображения)
    └── sounds/
```

### Основные компоненты

- **GameCanvas** - основной компонент игры, управляет canvas и игровым циклом
- **GameContext** - контекст для управления состоянием игры (счет, состояние, рекорд)
- **Duck** - класс, представляющий игрового персонажа
- **Obstacle** - класс, представляющий препятствия
- **ObstacleManager** - система управления генерацией и обновлением препятствий
- **CollisionSystem** - система детекции коллизий
- **ScoreSystem** - система подсчета очков
- **SoundManager** - менеджер звуковых эффектов

## Особенности

- ✅ Адаптивный дизайн для мобильных и десктопных устройств
- ✅ Система звуковых эффектов с возможностью отключения
- ✅ Система частиц при столкновениях
- ✅ Прогрессивное увеличение сложности
- ✅ Сохранение лучшего результата
- ✅ Мониторинг производительности (FPS, память)
- ✅ Проверка совместимости браузеров
- ✅ Полное покрытие тестами
- ✅ Оптимизированная отрисовка (только видимые объекты)

## Производительность

Игра оптимизирована для стабильной работы на 60 FPS:

- Отрисовываются только видимые объекты
- Кэширование границ объектов для оптимизации коллизий
- Эффективное использование requestAnimationFrame
- Автоматическая очистка препятствий за экраном
- Оптимизация памяти через правильную очистку обработчиков событий

## Совместимость браузеров

Игра протестирована и работает в следующих браузерах:

- Chrome/Edge (последние версии)
- Firefox (последние версии)
- Safari (последние версии)
- Мобильные браузеры (iOS Safari, Android Chrome)

## Разработка

### Структура разработки

Проект следует модульной архитектуре:

1. **Entities** - игровые сущности (Duck, Obstacle)
2. **Systems** - игровые системы (коллизии, препятствия, очки, частицы)
3. **Components** - React компоненты для UI и игрового canvas
4. **Contexts** - управление глобальным состоянием
5. **Hooks** - переиспользуемая логика (игровой цикл, клавиатура)

### Добавление новых функций

1. Новые игровые сущности добавляются в `src/game/entities/`
2. Новые системы добавляются в `src/game/systems/`
3. Новые UI компоненты добавляются в `src/components/UI/`
4. Типы определяются в `src/types/game.types.ts`
5. Константы добавляются в `src/game/utils/constants.ts`

## Тестирование

Проект включает комплексные тесты для всех основных компонентов:

- Тесты игровых сущностей (Duck, Obstacle)
- Тесты игровых систем (CollisionSystem, ObstacleManager, ScoreSystem)
- Тесты контекста игры (GameContext)

Запуск тестов:
```bash
npm test
```

## Лицензия

Этот проект создан в образовательных целях.

## Автор

Разработано как учебный проект для изучения React, TypeScript и Canvas API.
