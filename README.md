# Утка - Flappy Bird Clone

Веб-игра в стиле Flappy Bird, разработанная на React и TypeScript. Цель игры - управлять уткой, избегая препятствий и набирая очки.

## Описание

"Утка" - это клон популярной игры Flappy Bird, где игрок управляет уткой, которая должна пролетать между препятствиями. Игра включает в себя:

- Плавную физику движения с гравитацией
- Систему подсчета очков с сохранением лучшего результата
- Прогрессивное увеличение сложности
- Звуковые эффекты
- Адаптивный дизайн для разных устройств
- Систему частиц при столкновениях
- Анимированный фон с облаками, деревьями и декоративными элементами

## Технологии

- **React 18+** - UI библиотека для создания компонентов
- **TypeScript 5+** - Типизированный JavaScript для надежности кода
- **Vite** - Современный сборщик для быстрой разработки
- **Canvas API** - Рендеринг игровой графики и анимаций
- **CSS Modules** - Стилизация компонентов
- **Vitest** - Фреймворк для тестирования

## Установка

1. Клонировать репозиторий:
```bash
git clone <repository-url>
cd duck-game
```

2. Установить зависимости:
```bash
npm install
```

## Запуск

### Разработка

Запустить dev-сервер:
```bash
npm run dev
```

Приложение будет доступно по адресу `http://localhost:5173`

### Production сборка

Собрать проект для production:
```bash
npm run build
```

Собранные файлы будут находиться в директории `dist/`

### Предпросмотр production сборки

Предпросмотр собранного проекта:
```bash
npm run preview
```

## Управление

- **Пробел** или **Стрелка вверх** - прыжок утки
- **Клик мыши** или **Тап** - прыжок утки
- **Escape** - пауза (во время игры)

## Тестирование

Запустить тесты:
```bash
npm test
```

Запустить тесты с UI:
```bash
npm run test:ui
```

Запустить тесты один раз:
```bash
npm run test:run
```

## Дополнительные команды

### Линтинг

Проверить код линтером:
```bash
npm run lint
```

### Форматирование

Отформатировать код:
```bash
npm run format
```

## Архитектура проекта

### Структура директорий

```
src/
├── components/          # React компоненты
│   ├── Game/          # Основной игровой компонент
│   └── UI/            # UI компоненты (меню, кнопки)
├── game/              # Игровая логика
│   ├── entities/      # Игровые сущности (Утка, Препятствия)
│   ├── systems/       # Игровые системы (физика, коллизии, очки)
│   └── utils/         # Утилиты (константы, звуки, производительность)
├── hooks/             # Кастомные React хуки
├── contexts/          # React контексты для состояния
├── types/             # TypeScript типы и интерфейсы
└── assets/            # Ресурсы (звуки)
```

### Основные компоненты

- **GameCanvas** - Основной компонент игры, управляет canvas и игровым циклом
- **GameContext** - Контекст для управления состоянием игры (счет, состояние, лучший результат)
- **Duck** - Класс, представляющий игрового персонажа
- **Obstacle** - Класс, представляющий препятствия
- **ObstacleManager** - Система управления препятствиями
- **CollisionSystem** - Система детекции коллизий
- **ScoreSystem** - Система подсчета очков
- **SoundManager** - Менеджер звуковых эффектов

### Игровой цикл

Игра использует `requestAnimationFrame` для создания плавного игрового цикла с частотой 60 FPS. Основной цикл включает:

1. Обновление состояния (физика, позиции объектов)
2. Проверка коллизий
3. Отрисовка всех объектов на canvas

## Особенности

- **Прогрессивная сложность**: Скорость препятствий и расстояние между ними изменяются в зависимости от набранных очков
- **Оптимизация производительности**: Отрисовываются только видимые объекты, используется кэширование границ для коллизий
- **Адаптивность**: Игра автоматически масштабируется под размер экрана, поддерживает мобильные устройства
- **Звуковые эффекты**: Звуки прыжка, столкновения и набора очков с возможностью отключения
- **Система частиц**: Визуальные эффекты при столкновениях
- **Сохранение прогресса**: Лучший результат сохраняется в localStorage

## Разработка

### Настройка окружения

Проект использует:
- ESLint для линтинга кода
- Prettier для форматирования
- TypeScript для типизации

### Добавление звуков

Звуковые файлы должны быть размещены в `public/sounds/`. Поддерживаемые форматы: MP3, OGG, WAV.

Для генерации тестовых звуков можно использовать скрипт в `src/assets/sounds/generate-sounds.js`.

### Отладка

Для включения overlay производительности:
```javascript
localStorage.setItem('duck-game-show-performance', 'true');
```

Для проверки совместимости браузера (в dev режиме):
```javascript
localStorage.setItem('duck-game-show-compatibility', 'true');
```

## Лицензия

Этот проект создан в образовательных целях.

## Автор

Разработано как учебный проект для изучения React, TypeScript и Canvas API.
