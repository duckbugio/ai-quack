# Duck Game

Игра про утку, вдохновленная Flappy Bird. Управляйте уткой, избегайте препятствий и набирайте очки!

## Описание

Duck Game - это браузерная игра, разработанная на React и TypeScript. Игрок управляет уткой, которая должна пролетать между препятствиями, нажимая на клавишу для прыжка. Игра включает систему подсчета очков, сохранение лучшего результата и звуковые эффекты.

## Технологии

- **React 18** - UI библиотека
- **TypeScript** - типизированный JavaScript
- **Vite** - инструмент сборки и разработки
- **Canvas API** - рендеринг игровой графики
- **Vitest** - фреймворк для тестирования

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd repo
```

2. Установите зависимости:
```bash
npm install
```

3. Запустите сервер разработки:
```bash
npm run dev
```

4. Откройте браузер и перейдите по адресу, указанному в терминале (обычно `http://localhost:5173`)

## Скрипты

- `npm run dev` - запуск сервера разработки
- `npm run build` - сборка проекта для продакшена
- `npm run preview` - предпросмотр собранного проекта
- `npm run lint` - проверка кода линтером
- `npm run format` - форматирование кода с помощью Prettier
- `npm test` - запуск тестов в режиме watch
- `npm run test:ui` - запуск тестов с UI интерфейсом
- `npm run test:run` - однократный запуск тестов

## Управление

- **Пробел** или **Клик мышью** - прыжок утки
- **P** или **Escape** - пауза/возобновление игры

## Структура проекта

```
src/
├── components/          # React компоненты
│   ├── Game/           # Игровые компоненты
│   │   └── GameCanvas.tsx
│   └── UI/             # UI компоненты
│       ├── MainMenu.tsx
│       ├── PauseMenu.tsx
│       ├── GameOverMenu.tsx
│       └── PerformanceOverlay.tsx
├── contexts/           # React контексты
│   └── GameContext.tsx # Контекст состояния игры
├── game/              # Игровая логика
│   ├── entities/      # Игровые сущности
│   │   ├── Duck.ts    # Класс утки
│   │   └── Obstacle.ts # Класс препятствий
│   ├── systems/       # Игровые системы
│   │   ├── CollisionSystem.ts    # Система коллизий
│   │   ├── ObstacleManager.ts    # Управление препятствиями
│   │   ├── ParticleSystem.ts     # Система частиц
│   │   └── ScoreSystem.ts         # Система подсчета очков
│   └── utils/         # Утилиты
│       ├── constants.ts           # Игровые константы
│       ├── SoundManager.ts        # Управление звуками
│       ├── PerformanceMonitor.ts  # Мониторинг производительности
│       └── BrowserCompatibility.ts # Проверка совместимости
├── hooks/             # Пользовательские хуки
│   ├── useGameLoop.ts # Хук игрового цикла
│   └── useKeyboard.ts # Хук обработки клавиатуры
├── types/             # TypeScript типы
│   └── game.types.ts  # Типы игры
└── test/              # Настройки тестирования
    └── setup.ts
```

## Основные возможности

- **Физика игры**: реалистичная гравитация и движение
- **Система препятствий**: динамическая генерация препятствий
- **Система коллизий**: точное определение столкновений
- **Система частиц**: визуальные эффекты при столкновениях
- **Подсчет очков**: очки за пройденные препятствия
- **Сохранение прогресса**: лучший результат сохраняется в localStorage
- **Звуковые эффекты**: звуки прыжка, столкновения и счета
- **Управление звуком**: возможность включения/выключения звуков
- **Мониторинг производительности**: опциональный overlay с метриками FPS

## Тестирование

Проект включает unit-тесты для основных игровых систем:

- Тесты сущностей (Duck, Obstacle)
- Тесты систем (CollisionSystem, ObstacleManager, ScoreSystem)
- Тесты контекста игры

Запуск тестов:
```bash
npm test
```

## Сборка для продакшена

```bash
npm run build
```

Собранные файлы будут находиться в папке `dist/`.

## Особенности реализации

- **Оптимизация производительности**: кэширование вычислений, оптимизация отрисовки
- **Адаптивность**: игра работает на различных размерах экрана
- **Типобезопасность**: полная типизация на TypeScript
- **Модульность**: четкое разделение на компоненты, системы и утилиты

## Лицензия

Проект создан в образовательных целях.
